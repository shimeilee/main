<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UltiStudent.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">main</a> &gt; <a href="index.source.html" class="el_package">seedu.ultistudent.model</a> &gt; <span class="el_source">UltiStudent.java</span></div><h1>UltiStudent.java</h1><pre class="source lang-java linenums">package seedu.ultistudent.model;

import static java.util.Objects.requireNonNull;

import java.util.List;

import javafx.beans.InvalidationListener;
import javafx.collections.ObservableList;
import seedu.ultistudent.commons.util.InvalidationListenerManager;
import seedu.ultistudent.model.cap.CapEntry;
import seedu.ultistudent.model.cap.ModuleSemester;
import seedu.ultistudent.model.cap.UniqueCapEntryList;
import seedu.ultistudent.model.cap.UniqueModuleSemesterList;
import seedu.ultistudent.model.homework.Homework;
import seedu.ultistudent.model.homework.UniqueHomeworkList;
import seedu.ultistudent.model.homework.UniqueModuleCodeList;
import seedu.ultistudent.model.modulecode.ModuleCode;
import seedu.ultistudent.model.note.Note;
import seedu.ultistudent.model.note.UniqueNoteList;
import seedu.ultistudent.model.person.Person;
import seedu.ultistudent.model.person.UniquePersonList;

/**
 * Wraps all data at the ultistudent level
 * Duplicates are not allowed (by .isSamePerson comparison)
 */
public class UltiStudent implements ReadOnlyUltiStudent {

    private final UniqueCapEntryList capEntryList;
    private final UniquePersonList persons;
    private final UniqueHomeworkList homeworkList;
    private final UniqueModuleCodeList moduleCodeList;
    private final UniqueModuleSemesterList moduleSemesterList;
    private final UniqueNoteList noteList;
<span class="fc" id="L35">    private final InvalidationListenerManager invalidationListenerManager = new InvalidationListenerManager();</span>

    /*
     * The 'unusual' code block below is an non-static initialization block, sometimes used to avoid duplication
     * between constructors. See https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html
     *
     * Note that non-static init blocks are not recommended to use. There are other ways to avoid duplication
     *   among constructors.
     */
    {
<span class="fc" id="L45">        persons = new UniquePersonList();</span>
<span class="fc" id="L46">        capEntryList = new UniqueCapEntryList();</span>
<span class="fc" id="L47">        homeworkList = new UniqueHomeworkList();</span>
<span class="fc" id="L48">        noteList = new UniqueNoteList();</span>
<span class="fc" id="L49">        moduleSemesterList = new UniqueModuleSemesterList();</span>
<span class="fc" id="L50">        moduleCodeList = new UniqueModuleCodeList();</span>
    }

<span class="fc" id="L53">    public UltiStudent() {}</span>

    /**
     * Creates an UltiStudent using the Persons in the {@code toBeCopied}
     */
    public UltiStudent(ReadOnlyUltiStudent toBeCopied) {
<span class="fc" id="L59">        this();</span>
<span class="fc" id="L60">        resetData(toBeCopied);</span>
<span class="fc" id="L61">    }</span>

    //// list overwrite operations

    /**
     * Replaces the contents of the person list with {@code persons}.
     * {@code persons} must not contain duplicate persons.
     */
    public void setPersons(List&lt;Person&gt; persons) {
<span class="fc" id="L70">        this.persons.setPersons(persons);</span>
<span class="fc" id="L71">        indicateModified();</span>
<span class="fc" id="L72">    }</span>

    /**
     * Replaces the contents of the cap entries list with {@code capEntryList}.
     * {@code capEntryList} must not contain duplicate cap entries.
     */
    public void setCapEntryList(List&lt;CapEntry&gt; capEntryList) {
<span class="fc" id="L79">        this.capEntryList.setCapEntryList(capEntryList);</span>
<span class="fc" id="L80">        indicateModified();</span>
<span class="fc" id="L81">    }</span>

    /**
     * Sets the cap Score of Cap Manager, given the cap entries in {@code capEntryList}.
     */
    public void setCapScore(List&lt;CapEntry&gt; capEntryList) {
<span class="fc" id="L87">        double newTotalModuleCredits = 0;</span>
<span class="fc" id="L88">        double newTotalModuleScore = 0;</span>
<span class="fc bfc" id="L89" title="All 2 branches covered.">        for (CapEntry ce : capEntryList) {</span>
<span class="fc" id="L90">            double currentModuleCredits = ce.getModuleCredits().getValue();</span>
<span class="fc" id="L91">            double currentModuleScore = ce.getModuleGrade().getScore();</span>
<span class="fc" id="L92">            newTotalModuleCredits += currentModuleCredits;</span>
<span class="fc" id="L93">            newTotalModuleScore += currentModuleScore * currentModuleCredits;</span>
<span class="fc" id="L94">        }</span>
<span class="fc" id="L95">        CapEntry.setCapScore(newTotalModuleScore / newTotalModuleCredits);</span>
<span class="fc" id="L96">        indicateModified();</span>
<span class="fc" id="L97">    }</span>

    /**
     * Replaces the contents of the module semesters list with {@code moduleSemesterList}.
     * {@code moduleSemesterList} must not contain duplicate module semester.
     */
    public void setModuleSemesterList(List&lt;ModuleSemester&gt; moduleSemesterList) {
<span class="fc" id="L104">        this.moduleSemesterList.setModuleSemesterList(moduleSemesterList);</span>
<span class="fc" id="L105">        indicateModified();</span>
<span class="fc" id="L106">    }</span>

    public void setModuleCodeList(List&lt;ModuleCode&gt; moduleCodeList) {
<span class="fc" id="L109">        this.moduleCodeList.setModuleCodeList(moduleCodeList);</span>
<span class="fc" id="L110">        indicateModified();</span>
<span class="fc" id="L111">    }</span>

    /**
     * Resets the existing data of this {@code UltiStudent} with {@code newData}.
     */
    public void resetData(ReadOnlyUltiStudent newData) {
<span class="fc" id="L117">        requireNonNull(newData);</span>
<span class="fc" id="L118">        setCapScore(newData.getCapEntryList());</span>
<span class="fc" id="L119">        setCapEntryList(newData.getCapEntryList());</span>
<span class="fc" id="L120">        setPersons(newData.getPersonList());</span>
<span class="fc" id="L121">        setHomework(newData.getHomeworkList());</span>
<span class="fc" id="L122">        setModuleSemesterList(newData.getModuleSemesterList());</span>
<span class="fc" id="L123">        setNote(newData.getNoteList());</span>
<span class="fc" id="L124">        setModuleCodeList(newData.getModuleCodeList());</span>
<span class="fc" id="L125">    }</span>

    //// person-level operations

    /**
     * Returns true if a person with the same identity as {@code person} exists in the UltiStudent.
     */
    public boolean hasPerson(Person person) {
<span class="fc" id="L133">        requireNonNull(person);</span>
<span class="fc" id="L134">        return persons.contains(person);</span>
    }

    /**
     * Returns true if a cap entry with the same identity as {@code capEntry} exists in UltiStudent.
     */
    public boolean hasCapEntry(CapEntry capEntry) {
<span class="fc" id="L141">        requireNonNull(capEntry);</span>
<span class="fc" id="L142">        return capEntryList.contains(capEntry);</span>
    }

    /**
     * Returns true if a module semester with the same identity as {@code moduleSemester} exists in UltiStudent.
     */
    public boolean hasModuleSemester(ModuleSemester moduleSemester) {
<span class="fc" id="L149">        requireNonNull(moduleSemester);</span>
<span class="fc" id="L150">        return moduleSemesterList.contains(moduleSemester);</span>
    }

    /**
     * Returns true if a module code with the same identity as {@code moduleCode} exists in UltiStudent.
     */
    public boolean hasModuleCode(ModuleCode moduleCode) {
<span class="nc" id="L157">        requireNonNull(moduleCode);</span>
<span class="nc" id="L158">        return moduleCodeList.contains(moduleCode);</span>
    }

    /**
     * Adds a person to the UltiStudent.
     * The person must not already exist in the UltiStudent.
     */
    public void addPerson(Person p) {
<span class="fc" id="L166">        persons.add(p);</span>
<span class="fc" id="L167">        indicateModified();</span>
<span class="fc" id="L168">    }</span>

    /**
     * Adds a cap entry to UltiStudent.
     * The cap entry must not already exist in UltiStudent.
     */
    public void addCapEntry(CapEntry c) {
<span class="fc" id="L175">        capEntryList.add(c);</span>
<span class="fc" id="L176">        indicateModified();</span>
<span class="fc" id="L177">    }</span>

    /**
     * Adds a module semester to UltiStudent.
     * The module semester must not already exist in UltiStudent.
     */
    public void addModuleSemester(ModuleSemester moduleSemester) {
<span class="fc" id="L184">        moduleSemesterList.add(moduleSemester);</span>
<span class="fc" id="L185">        indicateModified();</span>
<span class="fc" id="L186">    }</span>

    /**
     * Adds a module code to UltiStudent.
     * The module code must not already exist in UltiStudent.
     */
    public void addModuleCode(ModuleCode moduleCode) {
<span class="nc" id="L193">        moduleCodeList.add(moduleCode);</span>
<span class="nc" id="L194">        indicateModified();</span>
<span class="nc" id="L195">    }</span>



    /**
     * Replaces the given person {@code target} in the list with {@code editedPerson}.
     * {@code target} must exist in the UltiStudent.
     * The person identity of {@code editedPerson} must not be the same as another existing person in the UltiStudent.
     */
    public void setPerson(Person target, Person editedPerson) {
<span class="fc" id="L205">        requireNonNull(editedPerson);</span>

<span class="fc" id="L207">        persons.setPerson(target, editedPerson);</span>
<span class="fc" id="L208">        indicateModified();</span>
<span class="fc" id="L209">    }</span>

    /**
     * Replaces the given cap entry {@code target} in the list with {@code editedCapEntry}.
     * {@code target} must exist in the UltiStudent.
     * The cap entry identity of {@code editedCapEntry} must not be the same as another existing cap entry in
     * the UltiStudent.
     */
    public void setCapEntry(CapEntry target, CapEntry editedCapEntry) {
<span class="fc" id="L218">        requireNonNull(editedCapEntry);</span>

<span class="fc" id="L220">        capEntryList.setCapEntry(target, editedCapEntry);</span>
<span class="fc" id="L221">        indicateModified();</span>
<span class="fc" id="L222">    }</span>

    /**
     * Replaces the given cap entry {@code target} in the list with {@code editedModuleSemester}.
     * {@code target} must exist in the UltiStudent.
     * The cap entry identity of {@code editedModuleSemester} must not be the same as another existing cap entry in
     * the UltiStudent.
     */
    public void setModuleSemester(ModuleSemester target, ModuleSemester editedModuleSemester) {
<span class="nc" id="L231">        requireNonNull(editedModuleSemester);</span>

<span class="nc" id="L233">        moduleSemesterList.setModuleSemester(target, editedModuleSemester);</span>
<span class="nc" id="L234">        indicateModified();</span>
<span class="nc" id="L235">    }</span>

    /**
     * Replaces the given cap entry {@code target} in the list with {@code editedCapEntry}.
     * {@code target} must exist in the UltiStudent.
     * The cap entry identity of {@code editedPerson} must not be the same as another existing cap entry in
     * the UltiStudent.
     */
    public void setModuleCode(ModuleCode target, ModuleCode editedModuleCode) {
<span class="nc" id="L244">        requireNonNull(editedModuleCode);</span>

<span class="nc" id="L246">        moduleCodeList.setModuleCode(target, editedModuleCode);</span>
<span class="nc" id="L247">        indicateModified();</span>
<span class="nc" id="L248">    }</span>



    /**
     * Removes {@code key} from this {@code UltiStudent}.
     * {@code key} must exist in the UltiStudent.
     */
    public void removePerson(Person key) {
<span class="fc" id="L257">        persons.remove(key);</span>
<span class="fc" id="L258">        indicateModified();</span>
<span class="fc" id="L259">    }</span>

    /**
     * Removes the cap entry, {@code key} from this {@code UltiStudent}.
     * {@code key} must exist in the UltiStudent.
     */
    public void removeCapEntry(CapEntry key) {
<span class="fc" id="L266">        capEntryList.remove(key);</span>
<span class="fc" id="L267">        indicateModified();</span>
<span class="fc" id="L268">    }</span>

    /**
     * Removes the module semester. {@code key} from this {@code UltiStudent}.
     * {@code key} must exist in the UltiStudent.
     */
    public void removeModuleSemester(ModuleSemester key) {
<span class="fc" id="L275">        moduleSemesterList.remove(key);</span>
<span class="fc" id="L276">        indicateModified();</span>
<span class="fc" id="L277">    }</span>

    /**
     * Removes {@code key} from this {@code UltiStudent}.
     * {@code key} must exist in the UltiStudent.
     */
    public void removeModuleCode(ModuleCode key) {
<span class="nc" id="L284">        moduleCodeList.remove(key);</span>
<span class="nc" id="L285">        indicateModified();</span>
<span class="nc" id="L286">    }</span>

    public void setHomework(Homework target, Homework editedHomework) {
<span class="nc" id="L289">        requireNonNull(editedHomework);</span>

<span class="nc" id="L291">        homeworkList.setHomework(target, editedHomework);</span>
<span class="nc" id="L292">        indicateModified();</span>
<span class="nc" id="L293">    }</span>

    public void setHomework(List&lt;Homework&gt; homework) {
<span class="fc" id="L296">        this.homeworkList.setHomework(homework);</span>
<span class="fc" id="L297">        indicateModified();</span>
<span class="fc" id="L298">    }</span>

    /**
     * Returns true if a person with the same identity as {@code person} exists in the UltiStudent.
     */
    public boolean hasHomework(Homework homework) {
<span class="nc" id="L304">        requireNonNull(homework);</span>
<span class="nc" id="L305">        return this.homeworkList.contains(homework);</span>
    }

    /**
     * Adds a person to the UltiStudent.
     * The person must not already exist in the UltiStudent.
     */
    public void addHomework(Homework homework) {
<span class="fc" id="L313">        this.homeworkList.add(homework);</span>
<span class="fc" id="L314">        indicateModified();</span>
<span class="fc" id="L315">    }</span>

    /**
     * Removes {@code key} from this {@code UltiStudent}.
     * {@code key} must exist in the UltiStudent.
     */
    public void removeHomework(Homework homework) {
<span class="fc" id="L322">        this.homeworkList.remove(homework);</span>
<span class="fc" id="L323">        indicateModified();</span>
<span class="fc" id="L324">    }</span>

    //===== Note Manager =====
    public void setNote(Note target, Note editedNote) {
<span class="fc" id="L328">        requireNonNull(editedNote);</span>

<span class="fc" id="L330">        noteList.setNote(target, editedNote);</span>
<span class="fc" id="L331">        indicateModified();</span>
<span class="fc" id="L332">    }</span>

    public void setNote(List&lt;Note&gt; note) {
<span class="fc" id="L335">        this.noteList.setNotes(note);</span>
<span class="fc" id="L336">        indicateModified();</span>
<span class="fc" id="L337">    }</span>

    /**
     * Returns true if a note with the same identity as {@code note} exists in
     * the UltiStudent.
     */
    public boolean hasNote(Note note) {
<span class="nc" id="L344">        requireNonNull(note);</span>
<span class="nc" id="L345">        return this.noteList.contains(note);</span>
    }

    /**
     * Adds a note to the UltiStudent.
     * The note must not already exist in the UltiStudent.
     */
    public void addNote(Note note) {
<span class="fc" id="L353">        this.noteList.add(note);</span>
<span class="fc" id="L354">        indicateModified();</span>
<span class="fc" id="L355">    }</span>

    /**
     * Removes {@code key} from this {@code UltiStudent}.
     * {@code key} must exist in the UltiStudent.
     */
    public void removeNote(Note note) {
<span class="nc" id="L362">        this.noteList.remove(note);</span>
<span class="nc" id="L363">        indicateModified();</span>
<span class="nc" id="L364">    }</span>


    @Override
    public void addListener(InvalidationListener listener) {
<span class="fc" id="L369">        invalidationListenerManager.addListener(listener);</span>
<span class="fc" id="L370">    }</span>

    @Override
    public void removeListener(InvalidationListener listener) {
<span class="fc" id="L374">        invalidationListenerManager.removeListener(listener);</span>
<span class="fc" id="L375">    }</span>

    /**
     * Notifies listeners that the UltiStudent has been modified.
     */
    protected void indicateModified() {
<span class="fc" id="L381">        invalidationListenerManager.callListeners(this);</span>
<span class="fc" id="L382">    }</span>

    //// util methods

    @Override
    public String toString() {
<span class="fc" id="L388">        return persons.asUnmodifiableObservableList().size() + &quot; persons&quot;;</span>
        // TODO: refine later
    }

    @Override
    public ObservableList&lt;Person&gt; getPersonList() {
<span class="fc" id="L394">        return persons.asUnmodifiableObservableList();</span>
    }

    @Override
    public ObservableList&lt;CapEntry&gt; getCapEntryList() {
<span class="fc" id="L399">        return capEntryList.asUnmodifiableObservableList();</span>
    }

    @Override
    public ObservableList&lt;Homework&gt; getHomeworkList() {
<span class="fc" id="L404">        return homeworkList.asUnmodifiableObservableList();</span>
    }

    @Override
    public ObservableList&lt;ModuleSemester&gt; getModuleSemesterList() {
<span class="fc" id="L409">        return moduleSemesterList.asUnmodifiableObservableList();</span>
    }

    @Override
    public ObservableList&lt;Note&gt; getNoteList() {
<span class="fc" id="L414">        return noteList.asUnmodifiableObservableList();</span>
    }

    @Override
    public ObservableList&lt;ModuleCode&gt; getModuleCodeList() {
<span class="fc" id="L419">        return moduleCodeList.asUnmodifiableObservableList();</span>
    }

    @Override
    public boolean equals(Object other) {
<span class="pc bpc" id="L424" title="2 of 4 branches missed.">        return other == this // short circuit if same object</span>
                || (other instanceof UltiStudent // instanceof handles nulls
<span class="fc bfc" id="L426" title="All 2 branches covered.">                &amp;&amp; persons.equals(((UltiStudent) other).persons));</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L431">        return persons.hashCode();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>